<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>üåå 3D Metaverse</title>
<style>*{margin:0;padding:0}body{background:#000;color:#fff;font-family:Monaco;overflow:hidden}#scene{position:absolute;width:100%;height:100%}#hud{position:absolute;top:20px;left:20px;background:rgba(0,0,0,.8);border:2px solid #FF1D6C;padding:20px;font-size:12px;z-index:10}.title{color:#FF1D6C;font-size:16px;font-weight:bold;margin-bottom:10px}.stat{margin:5px 0;display:flex;justify-content:space-between;gap:20px}.label{color:#F5A623}.value{color:#2979FF;font-weight:bold}#controls{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);border:2px solid #2979FF;padding:15px;z-index:10}.control-btn{background:#FF1D6C;color:#fff;border:none;padding:8px 16px;margin:5px;cursor:pointer;border-radius:4px}.control-btn:hover{background:#F5A623}</style>
</head><body><div id="scene"></div><div id="hud"><div class="title">üåå 3D METAVERSE</div><div class="stat"><span class="label">Agents:</span><span class="value" id="agents">0</span></div><div class="stat"><span class="label">Connections:</span><span class="value" id="conns">0</span></div><div class="stat"><span class="label">FPS:</span><span class="value" id="fps">60</span></div></div><div id="controls"><button class="control-btn" onclick="toggle()">‚èØ Pause</button><button class="control-btn" onclick="reset()">üì∑ Reset</button></div>
<script type="importmap">{"imports":{"three":"https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js","three/addons/":"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"}}</script>
<script type="module">import*as THREE from'three';import{OrbitControls}from'three/addons/controls/OrbitControls.js';const scene=new THREE.Scene();scene.background=new THREE.Color(0x0a0a0a);scene.fog=new THREE.FogExp2(0x0a0a0a,.002);const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1000);camera.position.set(0,50,100);const renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(window.innerWidth,window.innerHeight);document.getElementById('scene').appendChild(renderer.domElement);const controls=new OrbitControls(camera,renderer.domElement);controls.enableDamping=true;scene.add(new THREE.AmbientLight(0x404040,1));const light=new THREE.PointLight(0xFF1D6C,2,200);light.position.set(0,50,0);scene.add(light);const grid=new THREE.GridHelper(200,50,0xFF1D6C,0x2979FF);grid.material.opacity=.2;grid.material.transparent=true;scene.add(grid);const starGeo=new THREE.BufferGeometry(),starVerts=[];for(let i=0;i<10000;i++){starVerts.push((Math.random()-.5)*2000,(Math.random()-.5)*2000,(Math.random()-.5)*2000)}starGeo.setAttribute('position',new THREE.Float32BufferAttribute(starVerts,3));const stars=new THREE.Points(starGeo,new THREE.PointsMaterial({color:0xffffff,size:.7}));scene.add(stars);const agents=new Map(),conns=[],COLORS=[0xFF1D6C,0xF5A623,0x2979FF,0x9C27B0];let anim=true,lastTime=Date.now(),frames=0;const ws=new WebSocket('ws://localhost:8765');ws.onopen=()=>console.log('üü¢ 3D Connected');ws.onmessage=e=>{try{const d=JSON.parse(e.data);if(d.agent){const id=d.agent.id||Math.random().toString(36);if(!agents.has(id)){const color=COLORS[agents.size%4],geo=new THREE.SphereGeometry(2,32,32),mat=new THREE.MeshPhongMaterial({color,emissive:color,emissiveIntensity:.5}),mesh=new THREE.Mesh(geo,mat),r=50,t=Math.random()*Math.PI*2,p=Math.random()*Math.PI;mesh.position.x=r*Math.sin(p)*Math.cos(t);mesh.position.y=r*Math.cos(p);mesh.position.z=r*Math.sin(p)*Math.sin(t);scene.add(mesh);agents.set(id,{mesh,v:new THREE.Vector3((Math.random()-.5)*.2,(Math.random()-.5)*.2,(Math.random()-.5)*.2)})}document.getElementById('agents').textContent=agents.size}}catch(e){}}};function animate(){requestAnimationFrame(animate);frames++;const now=Date.now();if(now-lastTime>1000){document.getElementById('fps').textContent=frames;frames=0;lastTime=now}if(anim){agents.forEach(a=>{a.mesh.position.add(a.v);const l=80;if(Math.abs(a.mesh.position.x)>l)a.v.x*=-1;if(Math.abs(a.mesh.position.y)>l)a.v.y*=-1;if(Math.abs(a.mesh.position.z)>l)a.v.z*=-1});stars.rotation.y+=.0001}controls.update();renderer.render(scene,camera)}window.toggle=()=>{anim=!anim};window.reset=()=>{camera.position.set(0,50,100);controls.target.set(0,0,0)};window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)});animate()</script>
</body></html>
